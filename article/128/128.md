# 分享链接、图片可能泄露你的隐私

## 太长不看

点击分享后，生成的链接、图片可能会泄露包括但不限于：账号 id、设备（电脑、手机、平板）、操作系统……<br>
无论 Web、App，境内、境外服务，都广泛存在这个问题。

我一直有关注这个问题。我给别人分享的链接都会去掉这些跟踪参数（读者从我文章中的引用链接也可以观察到）。

**有什么问题吗？**<br>

**冗长链接的问题：**
- 影响阅读：手机上可能直接占满全屏；
- 由于字数限制，链接可能被截断导致无法访问
- 不利于互联网存档：不管是查询还是存档，同一内容最好只对应一个 URL。

改成短链接可以解决前 2 个问题，但短链接更容易失效。比如 B 站的 [https://b23.tv/<7位数字字母>](https://b23.tv/) 有效期为 1 年。

**隐私问题：**
- 不想被视奸，朋友也不行
- 朋友随手转发了你的分享，结果陌生人能找到你的账号
- 在论坛分享内容，结果被网友查到了你在其他平台的账号。如果你从事匿名活动，这个后果可能很严重。

**有解决办法吗？**<br>
确实有工具可以用，但是：
1. 这些工具更新不及时、没覆盖你的使用场景，可能会导致**无法（完全）清理跟踪参数**，或者影响正常使用。而影响使用的问题是**本来不会出现的新问题**。
2. **使用门槛**：出现问题后，你如何才能知道是 URL 参数清理导致的呢？定位原因也是需要相关知识的。

我自己简单研究了文中提到的 2 个工具后，因为怕遇到问题，没有使用。

根据目前的状况，我的建议是**学习相关知识，自行解决问题**：URL 结构、URL 参数作用、常见的跟踪参数名称。这几点还是基础的，想完全理解的话，得学完 Web 开发基础才行。

## 你的隐私是怎样泄漏的

### UTM 参数

#### 人类可读

**网易云音乐**<br>
2025-01 月测试，Android 9.2.40 版本：点分享歌词图片，图片中的二维码带有 `userid` 参数，形式是数字 id，直接可以定位到分享者。

#### 掩耳盗铃

表面看起来「加密了」，实际仍然是第三方可读的。

**B 站**<br>
2025-01 月测试：Web 端视频下方点击分享链接，生成的 `vd_source` 参数，就是 uid 的 md5 值。（其他方式生成的 vd_source 算法还不清楚）<br>
md5 属于一种散列算法（哈希 / Hash），不是加密。散列值不可逆，但可以暴力破解。比如 [cmd5](https://www.cmd5.com/) 收录了 11 位数字以内的 md5 值，**11 位以内的 uid 都可以秒查**。<br>
App 分享的链接中包含 `mid` 参数，也是跟用户 id 绑定的。只是目前没找到还原方法。

### 短链接

短链接并不是必然带有追踪功能。但它经常被用于缩短一长串的 UTM 参数。

### 盲水印 隐形水印

App 提供的图片分享，一般都带有二维码，只不过是把 URL 换了个形式而已，一样能跟踪。

截图分享是不是就没问题了？<br>
不。还有更阴险的「盲水印」。盲水印难以察觉，其内容却可以定位到浏览者。<br>
煎蛋网、滴滴出行、豆瓣、知乎、QQ 邮箱，都曾经添加盲水印。具体可以看 [gledos 的整理](https://ggame.gledos.science/theme/%E9%9A%90%E8%94%BD%E7%9A%84%E8%BF%BD%E8%B8%AA%E6%B0%B4%E5%8D%B0%E4%B8%BB%E9%A2%98.html) 。

关于其原理，这里推荐一篇：<br>
[盲水印和图片隐写术](https://ulyc.github.io/2019/03/15/%E7%9B%B2%E6%B0%B4%E5%8D%B0%E5%92%8C%E5%9B%BE%E7%89%87%E9%9A%90%E5%86%99%E6%9C%AF/)

## 解决办法

### 尽量不使用短链接

如果做不到，那么需要注意：

**作为分享者**<br>
不分享短链接，避免泄露隐私。<br>
对于能通过网页访问的服务，把短链接复制到浏览器里访问，再去参数就行。<br>
但是，如果网站直接把资源 id 与跟踪参数混合在一起，就难办了。<br>
也可能分享链接直接抛弃 HTTP 协议，比如「淘口令」。

**作为使用者**<br>
短链接不仅有隐私问题，还有安全问题。由于短链接隐藏了真实的 URL，导致难以判断链接的安全性。短链接的目标可能是危险的网页，会危害使用者的网络安全。<br>
对于陌生人发的短链接，不要直接访问，而是使用**短链接还原服务**。

### 去除跟踪参数

#### 找人的工具

<https://uid.ejfkdev.com/>

<https://findsomebody.nclgclub.com/>

#### 去除跟踪参数的工具

**ClearURLs**<br>
是浏览器扩展，可能是目前用户最多的工具。<br>
[Firefox](https://addons.mozilla.org/firefox/addon/clearurls/) / [Chrome](https://chromewebstore.google.com/detail/clearurls/lckanjgmijmafbedllaakclkaicjfmnk)<br>
[官网](https://docs.clearurls.xyz)、[GitHub](https://github.com/ClearURLs)

支持订阅规则。GitHub 上的 PR 大多没有被合并，看起来开发者主要使用 GitLab。<br>
从 [规则集](https://rules2.clearurls.xyz/data.minify.json) 可以看到支持的网站，其中境内服务有淘宝（天猫）、微博、B 站、优酷。我简单测试了 B 站和淘宝，没发现影响正常功能的问题，B 站的规则还不全。

**跟踪链接净化**<br>
是脚本。[Greasy Fork](https://greasyfork.org/zh-CN/scripts/456881)<br>
支持境内服务，支持自定义参数

## 相关文章

[揭秘：B站链接和知乎图片盲水印可能泄露您的隐私](https://www.techleaf.xyz/article/62774035-7216-4ce3-ada8-c1a836b51061)

[短链接正被用于隐蔽地追踪用户（附解决方案）](https://bgm.tv/group/topic/363349)

## 写作动机

2024-04 月，看到「差评」（自媒体）写的《[各大App的分享链接，正在偷窥你的朋友圈。](https://mp.weixin.qq.com/s/J7-dvlTWXZZEgTC-8O3CqA)》，非常来气。因为「差评」非常不地道，* * * 要是没有人家开发的网站，他们这篇文章根本写不出来，结果不给链接。从时间上看，估计就是「差评」的编辑在「小众软件论坛」上看到了 `ejfkdev` 的帖子《[查看分享链接中暴露账号的小工具](https://meta.appinn.net/t/topic/53587)》，然后就有选题了。

以上是我当时的想法。我还想整一篇《主流互联网应用分享链接总结》，列举出会导致账号 id 泄露的应用。<br>
但现在（2025-01），本文写到这里，我对这个做法产生了犹豫。从分享链接反查账号，不是什么新鲜问题，也没有很高的技术难度。但毕竟是有门槛的，如果把反查方法公布、制作工具，有些类似于在漏洞未修复前发布利用工具。话又说回来，服务商们也没把这个问题当成漏洞处理；工具上线、以及「差评」发文后已经接近一年了，也没见到换成更能保护隐私的链接。

这种普通人无法直接从根源解决问题的无力感。让我想起最严重的隐私问题—— 黑产「社工库」。问题的源头是不愿意放弃权力的，甚至会解决提出问题的人。能怎么办？